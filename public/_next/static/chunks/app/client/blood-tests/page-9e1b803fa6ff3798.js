(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8382],{43652:function(e,r,t){Promise.resolve().then(t.bind(t,85751))},85751:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return q}});var s,n,a=t(99891),o=t(56952),l=t.n(o),i=t(20955),c=t(61396),d=t.n(c),u=t(29312),f=t(41827),m=t(72642),x=t(63715),p=t(98702),g=t(13077),b=t(87022),h=t(92184),v=t(40176),y=t(26705),j=["className"],w=["className"],N=["className"],O=["className"],P=["className"],k=["className"];function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,s)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach(function(r){(0,b.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var S=i.forwardRef(function(e,r){var t=e.className,s=(0,h.Z)(e,j);return(0,y.jsx)("div",D({ref:r,className:(0,v.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},s))});S.displayName="Card";var C=i.forwardRef(function(e,r){var t=e.className,s=(0,h.Z)(e,w);return(0,y.jsx)("div",D({ref:r,className:(0,v.cn)("flex flex-col space-y-1.5 p-6",t)},s))});C.displayName="CardHeader";var E=i.forwardRef(function(e,r){var t=e.className,s=(0,h.Z)(e,N);return(0,y.jsx)("h3",D({ref:r,className:(0,v.cn)("text-lg font-semibold leading-none tracking-tight",t)},s))});E.displayName="CardTitle";var T=i.forwardRef(function(e,r){var t=e.className,s=(0,h.Z)(e,O);return(0,y.jsx)("p",D({ref:r,className:(0,v.cn)("text-sm text-muted-foreground",t)},s))});T.displayName="CardDescription";var A=i.forwardRef(function(e,r){var t=e.className,s=(0,h.Z)(e,P);return(0,y.jsx)("div",D({ref:r,className:(0,v.cn)("p-6 pt-0",t)},s))});A.displayName="CardContent";var R=i.forwardRef(function(e,r){var t=e.className,s=(0,h.Z)(e,k);return(0,y.jsx)("div",D({ref:r,className:(0,v.cn)("flex items-center p-6 pt-0",t)},s))});R.displayName="CardFooter";var L=t(14059),F=t(74530),_=t(78063),z=t(35817),W=t(76637),B=t(94399),V=t(35944),Y=t(96061),G=["className","variant"];function H(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,s)}return t}var M=(0,Y.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{primary:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",danger:"border-transparent bg-red-500 text-white hover:bg-red-500/80",outline:"text-foreground"}},defaultVariants:{variant:"primary"}});function U(e){var r=e.className,t=e.variant,s=(0,h.Z)(e,G);return(0,y.jsx)("div",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?H(Object(t),!0).forEach(function(r){(0,b.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({className:(0,v.cn)(M({variant:t}),r)},s))}function X(e){var r,t,s,n,o=e.result,c=(0,i.useState)(!1),d=c[0],u=c[1],f=(0,i.useState)(null),m=f[0],p=f[1],b=(0,i.useState)(0),h=b[0],v=b[1],j=(0,i.useState)(null),w=j[0],N=j[1],O=(null===(t=o.bloodTest)||void 0===t?void 0:t.name)||(null===(s=o.order)||void 0===s?void 0:s.testName)||"Blood Test",P=o.status===L.TestStatus.ready,k=(null===(n=o.order)||void 0===n?void 0:n.createdAt)||o.createdAt;o.updatedAt;var Z=(r=(0,a.Z)(l().mark(function e(){var r,t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!P||!o.resultUrl)){e.next=2;break}return e.abrupt("return");case 2:return u(!0),p(null),e.prev=4,e.next=7,fetch("/api/test-results/".concat(o.id,"/download"),{method:"GET",headers:{"Content-Type":"application/json"}});case 7:if((r=e.sent).ok){e.next=10;break}throw Error("Failed to get download link");case 10:return e.next=12,r.json();case 12:t=e.sent,v(function(e){return e+1}),N(new Date),window.open(t.downloadUrl,"_blank"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.error("Error downloading test result:",e.t0),p("Failed to download result. Please try again later.");case 22:return e.prev=22,u(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[4,18,22,25]])})),function(){return r.apply(this,arguments)});return(0,y.jsxs)(S,{className:"w-full",children:[(0,y.jsx)(C,{children:(0,y.jsxs)("div",{className:"flex justify-between items-start",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(E,{className:"text-lg",children:O}),(0,y.jsxs)(T,{children:["Test ordered ",(0,B.Z)(new Date(k),{addSuffix:!0})]})]}),(0,y.jsx)("div",{className:"flex items-center space-x-2",children:(0,y.jsx)(U,{variant:P?"primary":"outline",className:P?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200",children:P?"Ready":"Processing"})})]})}),(0,y.jsx)(A,{children:(0,y.jsxs)("div",{className:"text-sm text-gray-500",children:[P?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"Your test results are ready to download."}),w&&(0,y.jsxs)("p",{className:"mt-1 text-xs text-gray-400",children:["Last downloaded: ",(0,B.Z)(w,{addSuffix:!0})]}),h>0&&(0,y.jsxs)("div",{className:"mt-2 flex items-center text-xs text-green-600",children:[(0,y.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),"Downloaded ",h," ",1===h?"time":"times"]})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"Your test results are still being processed. We'll notify you when they're ready."}),(0,y.jsxs)(V.bZ,{variant:"info",className:"mt-2 bg-blue-50 text-blue-800 text-xs p-2",children:[(0,y.jsx)(_.Z,{className:"h-3 w-3"}),(0,y.jsx)(V.X,{children:"You'll receive an email when your results are ready to view."})]})]}),m&&(0,y.jsx)("p",{className:"text-red-500 mt-2",children:m})]})}),(0,y.jsx)(R,{children:(0,y.jsx)(g.z,{onClick:Z,disabled:!P||d,className:"w-full",variant:P?"primary":"secondary",children:d?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Downloading..."]}):P?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(z.Z,{className:"mr-2 h-4 w-4"}),"Download Results"]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(W.Z,{className:"mr-2 h-4 w-4"}),"Results Processing"]})})})]})}function q(){var e=(0,i.useState)([]),r=e[0],t=e[1],s=(0,i.useState)(""),n=s[0],o=s[1],c=(0,i.useState)("ALL"),g=c[0],b=c[1],h=(0,i.useState)(!0),v=h[0],j=h[1],w=(0,i.useState)(null),N=w[0],O=w[1];(0,i.useEffect)(function(){function e(){return(e=(0,a.Z)(l().mark(function e(){var r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),O(null),e.next=5,fetch("/api/test-results",{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if((r=e.sent).ok){e.next=8;break}throw Error("Failed to fetch test results");case 8:return e.next=10,r.json();case 10:t(e.sent.results||[]),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error fetching test results:",e.t0),O("Failed to load your test results. Please try again later.");case 18:return e.prev=18,j(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[0,14,18,21]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var P=r.filter(function(e){var r,t,s=((null===(r=e.bloodTest)||void 0===r?void 0:r.name)||(null===(t=e.order)||void 0===t?void 0:t.testName)||"").toLowerCase().includes(n.toLowerCase()),a="ALL"===g||e.status===g;return s&&a});return(0,y.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,y.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-6",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"My Results"}),(0,y.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"View and download your blood test results"})]}),(0,y.jsx)("div",{className:"mt-4 md:mt-0",children:(0,y.jsxs)(d(),{href:"/client/blood-tests/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:[(0,y.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"New Blood Test"]})})]}),(0,y.jsxs)("div",{className:"mb-6 md:flex md:items-center md:space-x-4",children:[(0,y.jsxs)("div",{className:"relative flex-1 mb-4 md:mb-0",children:[(0,y.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,y.jsx)("input",{type:"text",placeholder:"Search tests...",value:n,onChange:function(e){return o(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm"})]}),(0,y.jsxs)("div",{className:"relative inline-block",children:[(0,y.jsxs)("select",{value:g,onChange:function(e){return b(e.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",children:[(0,y.jsx)("option",{value:"ALL",children:"All statuses"}),(0,y.jsx)("option",{value:"ready",children:"Ready"}),(0,y.jsx)("option",{value:"processing",children:"Processing"})]}),(0,y.jsx)(m.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),v&&(0,y.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center",children:[(0,y.jsx)(x.Z,{className:"h-8 w-8 text-teal-500 mx-auto animate-spin mb-4"}),(0,y.jsx)("p",{className:"text-gray-500",children:"Loading your test results..."})]}),N&&!v&&(0,y.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-red-200 p-8 text-center",children:[(0,y.jsx)("p",{className:"text-red-500 mb-2",children:N}),(0,y.jsx)("button",{onClick:function(){return window.location.reload()},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:"Try Again"})]}),!v&&!N&&P.length>0&&(0,y.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(function(e){return(0,y.jsx)(X,{result:e},e.id)})}),!v&&!N&&0===P.length&&(0,y.jsxs)("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center",children:[(0,y.jsx)(p.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,y.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),n||"ALL"!==g?(0,y.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search or filter criteria"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{className:"text-gray-500 mb-2",children:"You don't have any blood test results yet"}),(0,y.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Order your first blood test to get started with your health journey"})]}),(0,y.jsxs)(d(),{href:"/client/blood-tests/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",children:[(0,y.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Order a Blood Test"]})]})]})}(s=n||(n={})).processing="processing",s.ready="ready"},35944:function(e,r,t){"use strict";t.d(r,{X:function(){return g},bZ:function(){return p}});var s=t(87022),n=t(92184),a=t(20955),o=t(96061),l=t(40176),i=t(26705),c=["className","variant"],d=["className"],u=["className"];function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,s)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var x=(0,o.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 text-green-700 dark:border-green-500 [&>svg]:text-green-500",info:"border-blue-500/50 text-blue-700 dark:border-blue-500 [&>svg]:text-blue-500",warning:"border-yellow-500/50 text-yellow-700 dark:border-yellow-500 [&>svg]:text-yellow-500"}},defaultVariants:{variant:"default"}}),p=a.forwardRef(function(e,r){var t=e.className,s=e.variant,a=(0,n.Z)(e,c);return(0,i.jsx)("div",m({ref:r,role:"alert",className:(0,l.cn)(x({variant:s}),t)},a))});p.displayName="Alert",a.forwardRef(function(e,r){var t=e.className,s=(0,n.Z)(e,d);return(0,i.jsx)("h5",m({ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t)},s))}).displayName="AlertTitle";var g=a.forwardRef(function(e,r){var t=e.className,s=(0,n.Z)(e,u);return(0,i.jsx)("div",m({ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t)},s))});g.displayName="AlertDescription"},13077:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var s=t(87022),n=t(92184),a=t(74769),o=t(26705),l=["children","variant","size","fullWidth","loading","className"];function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,s)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function d(e){var r=e.children,t=e.variant,s=e.size,i=e.fullWidth,d=e.loading,u=void 0!==d&&d,f=e.className,m=(0,n.Z)(e,l);return(0,o.jsx)("button",c(c({className:(0,a.m6)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[void 0===t?"primary":t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[void 0===s?"md":s],void 0!==i&&i?"w-full":"",f),disabled:u||m.disabled},m),{},{children:u?(0,o.jsxs)("span",{className:"flex items-center",children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]}):r}))}},40176:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var s=t(57042),n=t(74769);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,s.W)(r))}t(54131)}},function(e){e.O(0,[8218,4466,5350,2571,7973,8054,5042,4987,4121,6531,1744],function(){return e(e.s=43652)}),_N_E=e.O()}]);