(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9020],{40877:function(e,t,r){Promise.resolve().then(r.bind(r,70827))},70827:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(87022),s=r(99891),a=r(56952),o=r.n(a),c=r(20955),i=r(26705);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(){var e,t,r=(0,c.useState)([]),a=r[0],l=r[1],d=(0,c.useState)(!0),x=d[0],p=d[1],m=(0,c.useState)(null),f=m[0],h=m[1],b=(0,c.useState)(null),g=b[0],y=b[1],v=(0,c.useState)({name:"",role:"ADMIN",active:!0}),j=v[0],w=v[1],N=(0,c.useState)(!1),k=N[0],E=N[1],O=(0,c.useState)(null),_=O[0],S=O[1];(0,c.useEffect)(function(){var e;(e=(0,s.Z)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,fetch("/api/admin/google-users");case 4:if((t=e.sent).ok){e.next=7;break}throw Error("Failed to fetch Google users");case 7:return e.next=9,t.json();case 9:l(e.sent.users||[]),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),h("Error loading Google users. Please try again."),console.error("Error fetching Google users:",e.t0);case 17:return e.prev=17,p(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[0,13,17,20]])})),function(){return e.apply(this,arguments)})()},[]);var P=function(e){var t=e.target,r=t.name,s=t.value;if("checkbox"===t.type){var a=e.target.checked;w(u(u({},j),{},(0,n.Z)({},r,a)))}else w(u(u({},j),{},(0,n.Z)({},r,s)))},C=function(e){y(e),w({name:e.name||"",role:e.role,active:e.active}),S(null)},D=(e=(0,s.Z)(o().mark(function e(t){var r,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),g){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,E(!0),e.next=7,fetch("/api/admin/google-users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u({userId:g.id},j))});case 7:if((r=e.sent).ok){e.next=13;break}return e.next=11,r.json();case 11:throw Error(e.sent.error||"Failed to update user");case 13:return e.next=15,r.json();case 15:n=e.sent.user,l(a.map(function(e){return e.id===n.id?n:e})),S("User ".concat(n.email," updated successfully")),y(null),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),h(e.t0.message||"Error updating user"),console.error("Error updating user:",e.t0);case 26:return e.prev=26,E(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[3,22,26,29]])})),function(t){return e.apply(this,arguments)}),A=(t=(0,s.Z)(o().mark(function e(t,r){var n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to delete ".concat(r,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(!0),e.next=6,fetch("/api/admin/google-users?userId=".concat(t),{method:"DELETE"});case 6:if((n=e.sent).ok){e.next=12;break}return e.next=10,n.json();case 10:throw Error(e.sent.error||"Failed to delete user");case 12:l(a.filter(function(e){return e.id!==t})),S("User ".concat(r," deleted successfully")),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),h(e.t0.message||"Error deleting user"),console.error("Error deleting user:",e.t0);case 20:return e.prev=20,p(!1),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[2,16,20,23]])})),function(e,r){return t.apply(this,arguments)});return(0,i.jsxs)("div",{className:"container mx-auto px-4",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Google Admin Users"}),(0,i.jsx)("p",{className:"mb-4 text-gray-600",children:"Manage admin users who sign in with Google accounts (@edenclinicformen.com or @edenclinic.co.uk domains)."}),_&&(0,i.jsxs)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:[(0,i.jsx)("span",{className:"block sm:inline",children:_}),(0,i.jsx)("button",{className:"float-right",onClick:function(){return S(null)},children:"\xd7"})]}),f&&(0,i.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,i.jsx)("span",{className:"block sm:inline",children:f}),(0,i.jsx)("button",{className:"float-right",onClick:function(){return h(null)},children:"\xd7"})]}),g&&(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm mb-6 border border-gray-200",children:[(0,i.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Edit User: ",g.email]}),(0,i.jsxs)("form",{onSubmit:D,children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),(0,i.jsx)("input",{type:"text",id:"name",name:"name",value:j.name,onChange:P,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"role",children:"Role"}),(0,i.jsxs)("select",{id:"role",name:"role",value:j.role,onChange:P,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,i.jsx)("option",{value:"ADMIN",children:"ADMIN"}),(0,i.jsx)("option",{value:"SUPER_ADMIN",children:"SUPER_ADMIN"})]})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",name:"active",checked:j.active,onChange:P,className:"mr-2"}),(0,i.jsx)("span",{className:"text-gray-700 text-sm font-bold",children:"Active"})]})}),(0,i.jsxs)("div",{className:"flex items-center justify-end",children:[(0,i.jsx)("button",{type:"button",onClick:function(){return y(null)},className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mr-2",children:"Cancel"}),(0,i.jsx)("button",{type:"submit",disabled:k,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:k?"Saving...":"Save Changes"})]})]})]}),(0,i.jsx)("div",{className:"bg-white shadow-md rounded my-6 overflow-x-auto",children:x?(0,i.jsx)("div",{className:"p-4 flex justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===a.length?(0,i.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No Google admin users found. Users with @edenclinicformen.com or @edenclinic.co.uk emails who sign in with Google will appear here."}):(0,i.jsxs)("table",{className:"min-w-full bg-white",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,i.jsx)("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,i.jsx)("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,i.jsx)("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,i.jsx)("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,i.jsx)("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map(function(e){var t;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-4 px-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.email})}),(0,i.jsx)("td",{className:"py-4 px-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.name||"-"})}),(0,i.jsx)("td",{className:"py-4 px-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("SUPER_ADMIN"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:e.role})}),(0,i.jsx)("td",{className:"py-4 px-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.active?"Active":"Inactive"})}),(0,i.jsx)("td",{className:"py-4 px-4 whitespace-nowrap text-sm text-gray-500",children:(t=e.createdAt,new Date(t).toLocaleString())}),(0,i.jsxs)("td",{className:"py-4 px-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,i.jsx)("button",{onClick:function(){return C(e)},className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,i.jsx)("button",{onClick:function(){return A(e.id,e.email)},className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)})})]})})]})}},69991:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(20955),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,a={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,n)&&!i.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:l,ref:u,props:a,_owner:c.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},26705:function(e,t,r){"use strict";e.exports=r(69991)},99891:function(e,t,r){"use strict";function n(e,t,r,n,s,a,o){try{var c=e[a](o),i=c.value}catch(e){r(e);return}c.done?t(i):Promise.resolve(i).then(n,s)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(s,a){var o=e.apply(t,r);function c(e){n(o,s,a,c,i,"next",e)}function i(e){n(o,s,a,c,i,"throw",e)}c(void 0)})}}r.d(t,{Z:function(){return s}})},87022:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})}},function(e){e.O(0,[4121,6531,1744],function(){return e(e.s=40877)}),_N_E=e.O()}]);